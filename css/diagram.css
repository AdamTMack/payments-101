/* === SVG Base Styles === */
.diagram-node rect {
  fill: var(--color-diagram-node-bg);
  stroke: var(--color-diagram-node-border);
  stroke-width: 1.5;
  transition: all var(--transition-normal);
}

.diagram-node text {
  fill: var(--color-text-secondary);
  font-family: var(--font-mono);
  font-size: 8.5px;
  font-weight: 600;
  text-anchor: middle;
  letter-spacing: 0.03em;
  transition: fill var(--transition-normal);
}

.diagram-node .node-icon {
  fill: var(--color-diagram-default);
  transition: fill var(--transition-normal);
}

.diagram-path {
  stroke: var(--color-diagram-default);
  stroke-width: 1.5;
  fill: none;
  transition: stroke var(--transition-normal), opacity var(--transition-normal);
}

.diagram-path.settlement-path {
  stroke-dasharray: 6 4;
}

/* === Node States === */
.diagram-node.active rect {
  stroke: var(--color-accent);
  stroke-width: 2;
  filter: url(#glow);
}

.diagram-node.active text {
  fill: var(--color-text);
}

.diagram-node.active .node-icon {
  fill: var(--color-accent);
}

.diagram-node.dimmed rect {
  opacity: 0.3;
  stroke: var(--color-diagram-dimmed);
}

.diagram-node.dimmed text {
  opacity: 0.3;
}

.diagram-node.dimmed .node-icon {
  opacity: 0.3;
}

/* Settlement-specific active state */
.diagram-node.active-settlement rect {
  stroke: var(--color-settlement);
  stroke-width: 2;
}

.diagram-node.active-settlement .node-icon {
  fill: var(--color-settlement);
}

/* === Path/Arrow States === */
.diagram-path.active-path {
  stroke: var(--color-accent);
  stroke-width: 2;
}

.diagram-path.active-settlement-path {
  stroke: var(--color-settlement);
  stroke-width: 2;
}

.diagram-path.dimmed {
  opacity: 0.15;
}

/* === Animation Keyframes === */
@keyframes dash-travel {
  to {
    stroke-dashoffset: -20;
  }
}

@keyframes dash-travel-settlement {
  to {
    stroke-dashoffset: -20;
  }
}

.diagram-path.animating {
  stroke-dasharray: 8 6;
  animation: dash-travel 0.8s linear infinite;
}

.diagram-path.animating-settlement {
  animation: dash-travel-settlement 1.2s linear infinite;
}

/* === Diagram Container === */

/* Diagram drawer title */
.diagram-title {
  position: absolute;
  top: 0.375rem;
  left: 1rem;
  font-family: var(--font-mono);
  font-size: var(--font-size-label);
  letter-spacing: 0.06em;
  color: var(--color-text-muted);
  opacity: 0;
  transition: opacity var(--transition-normal);
  pointer-events: none;
}

.diagram-title.visible {
  opacity: 1;
}

/* === Platform Overlays === */
.platform-overlay {
  opacity: 0;
  transition: opacity var(--transition-normal);
  pointer-events: none;
}

.platform-overlay.visible {
  opacity: 1;
}

.platform-overlay[data-platform="adyen"] rect {
  fill: var(--color-adyen-bg);
  stroke: var(--color-adyen);
  stroke-width: 2;
}

.platform-overlay[data-platform="stripe"] rect {
  fill: var(--color-stripe-bg);
  stroke: var(--color-stripe);
  stroke-width: 2;
}

.platform-overlay[data-platform="square"] rect {
  fill: var(--color-square-bg);
  stroke: var(--color-square);
  stroke-width: 2;
}

/* Clickable node hover */
.diagram-node {
  cursor: pointer;
}

.diagram-node:hover rect {
  stroke: var(--color-accent);
  stroke-width: 2;
}

.diagram-node:hover .node-icon {
  fill: var(--color-accent);
}

/* === Fee Visualization === */
